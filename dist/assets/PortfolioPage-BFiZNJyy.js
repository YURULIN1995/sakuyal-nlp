import{j as t,L as j,r as p,h as I,u as q,S as L,s as W,O as y}from"./index-B-RPJ948.js";import{P as C}from"./PageHeaderBicolorBackground-DfNAR2kv.js";import{B as N}from"./BackgroundColor-CVaScox1.js";import{S as z}from"./check-CYC1LJVN.js";import"./PageTitle-CZLpa0WS.js";const B="_portfolioListContainer_brhw7_4",E={portfolioListContainer:B},k="_itemContainer_jztqq_4",A="_imageWrapper_jztqq_22",S="_textWrapper_jztqq_31",v="_titleWrapper_jztqq_47",P="_title_jztqq_47",U="_description_jztqq_101",D="_featuresList_jztqq_126",b="_featureIcon_jztqq_141",T="_portfolioButton_jztqq_148",r={itemContainer:k,imageWrapper:A,textWrapper:S,titleWrapper:v,title:P,description:U,featuresList:D,featureIcon:b,portfolioButton:T};function O({item:c}){const{title:m,description:n,featuresListItem:a,imageUrl:o,imageAlt:d,buttonText:l,buttonLink:s}=c,f=s==null?void 0:s.startsWith("/");return t.jsxs("div",{className:r.itemContainer,children:[t.jsx("div",{className:r.imageWrapper,children:t.jsx("img",{src:o,alt:d,loading:"lazy"})}),t.jsxs("div",{className:r.textWrapper,children:[t.jsx("div",{className:r.titleWrapper,children:t.jsx("h3",{className:r.title,children:m})}),t.jsx("p",{className:r.description,children:n}),a&&a.length>0&&t.jsx("ul",{className:r.featuresList,children:a.map(i=>t.jsxs("li",{children:[t.jsx(z,{className:r.featureIcon}),t.jsx("span",{children:i.text})]},i.id))}),l&&s&&(f?t.jsx(j,{to:s,className:r.portfolioButton,children:l}):t.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:r.portfolioButton,children:l}))]})]})}function M(){const[c,m]=p.useState([]),[n,a]=p.useState(!0),[o,d]=p.useState(null),{title:l,description:s}=W.pages.portfolio,f="作品集";return p.useEffect(()=>{const i=`*[_type == "portfolioItem"] | order(projectDate asc, _createdAt asc) {
      _id,
      "title": titleChinese,
      "titleEnglish": titleEnglish,
      "slug": slug.current,
      "description": description,
      mainImage {
        isExternal,
        externalUrl,
        image,
        imageAlt
      },
      featureDescription, 
      relatedLink 
    }`;a(!0),I.fetch(i).then(g=>{const _=g.map(e=>{var x;let u="https://placehold.co/600x400/cccccc/ffffff?text=No+Image";return e.mainImage&&(e.mainImage.isExternal&&e.mainImage.externalUrl?u=e.mainImage.externalUrl:e.mainImage.image&&(u=q(e.mainImage.image).width(800).url())),{...e,imageUrl:u,imageAlt:((x=e.mainImage)==null?void 0:x.imageAlt)||e.title,featuresListItem:e.featureDescription?e.featureDescription.map(h=>({id:h._key,text:h.featureText})):[],buttonLink:e.slug?`/portfolio/${e.slug}`:null,buttonText:e.slug?`查看 ${e.title}`:null}});m(_)}).catch(g=>{console.error("Sanity fetch error:",g),d("無法載入作品集，請稍後再試。")}).finally(()=>{a(!1)})},[]),t.jsxs(t.Fragment,{children:[t.jsx(L,{title:l,description:s}),t.jsx(C,{title:f}),t.jsx(N,{color:"lightGreen",children:t.jsx(y,{children:t.jsxs("div",{className:E.portfolioListContainer,children:[n&&t.jsx("p",{style:{textAlign:"center",padding:"4rem"},children:"載入中..."}),o&&t.jsx("p",{style:{textAlign:"center",color:"red",padding:"4rem"},children:o}),!n&&!o&&c.map(i=>t.jsx(O,{item:i},i._id)),!n&&!o&&c.length===0&&t.jsx("p",{style:{textAlign:"center",padding:"4rem"},children:"目前後台尚未新增任何作品。"})]})})})]})}export{M as default};
