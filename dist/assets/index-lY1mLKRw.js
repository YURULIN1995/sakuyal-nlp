import{o as re,p as ne}from"./index-B-RPJ948.js";var u={},Q;function le(){if(Q)return u;Q=1;var V=u&&u.__createBinding||(Object.create?(function(e,n,l,i){i===void 0&&(i=l);var o=Object.getOwnPropertyDescriptor(n,l);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[l]}}),Object.defineProperty(e,i,o)}):(function(e,n,l,i){i===void 0&&(i=l),e[i]=n[l]})),W=u&&u.__setModuleDefault||(Object.create?(function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}):function(e,n){e.default=n}),X=u&&u.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var l in e)l!=="default"&&Object.prototype.hasOwnProperty.call(e,l)&&V(n,e,l);return W(n,e),n};Object.defineProperty(u,"__esModule",{value:!0}),u.useTurnstile=void 0;const d=X(re()),f=typeof globalThis<"u"?globalThis:window;let s=typeof f.turnstile<"u"?"ready":"unloaded",D,b;const M=new Promise((e,n)=>{b={resolve:e,reject:n},s==="ready"&&e(void 0)});{const e="cf__reactTurnstileOnLoad",n="https://challenges.cloudflare.com/turnstile/v0/api.js";D=()=>{if(s==="unloaded"){s="loading",f[e]=()=>{b.resolve(),s="ready",delete f[e]};const l=`${n}?onload=${e}&render=explicit`,i=document.createElement("script");i.src=l,i.async=!0,i.addEventListener("error",()=>{b.reject("Failed to load Turnstile."),delete f[e]}),document.head.appendChild(i)}return M}}function Y({id:e,className:n,style:l,sitekey:i,action:o,cData:N,theme:C,language:q,tabIndex:B,responseField:U,responseFieldName:$,size:v,fixedSize:k,retry:A,retryInterval:F,refreshExpired:G,appearance:H,execution:J,userRef:w,onVerify:T,onSuccess:y,onLoad:O,onError:x,onExpire:h,onTimeout:j,onAfterInteractive:E,onBeforeInteractive:g,onUnsupported:m}){const z=(0,d.useRef)(null),t=(0,d.useState)({onVerify:T,onSuccess:y,onLoad:O,onError:x,onExpire:h,onTimeout:j,onAfterInteractive:E,onBeforeInteractive:g,onUnsupported:m})[0],_=w??z,ee=k?{width:v==="compact"?"130px":v==="flexible"?"100%":"300px",height:v==="compact"?"120px":"65px",...l}:l;return(0,d.useEffect)(()=>{if(!_.current)return;let K=!1,p="";return(async()=>{var S,L;if(s!=="ready")try{await D()}catch(r){(S=t.onError)===null||S===void 0||S.call(t,r);return}if(K||!_.current)return;let a;const te={sitekey:i,action:o,cData:N,theme:C,language:q,tabindex:B,"response-field":U,"response-field-name":$,size:v,retry:A,"retry-interval":F,"refresh-expired":G,appearance:H,execution:J,callback:(r,c)=>{var P,R;(P=t.onVerify)===null||P===void 0||P.call(t,r,a),(R=t.onSuccess)===null||R===void 0||R.call(t,r,c,a)},"error-callback":r=>{var c;return(c=t.onError)===null||c===void 0?void 0:c.call(t,r,a)},"expired-callback":r=>{var c;return(c=t.onExpire)===null||c===void 0?void 0:c.call(t,r,a)},"timeout-callback":()=>{var r;return(r=t.onTimeout)===null||r===void 0?void 0:r.call(t,a)},"after-interactive-callback":()=>{var r;return(r=t.onAfterInteractive)===null||r===void 0?void 0:r.call(t,a)},"before-interactive-callback":()=>{var r;return(r=t.onBeforeInteractive)===null||r===void 0?void 0:r.call(t,a)},"unsupported-callback":()=>{var r;return(r=t.onUnsupported)===null||r===void 0?void 0:r.call(t,a)}};p=window.turnstile.render(_.current,te),a=Z(p),(L=t.onLoad)===null||L===void 0||L.call(t,p,a)})(),()=>{K=!0,p&&window.turnstile.remove(p)}},[i,o,N,C,q,B,U,$,v,A,F,G,H,J]),(0,d.useEffect)(()=>{t.onVerify=T,t.onSuccess=y,t.onLoad=O,t.onError=x,t.onExpire=h,t.onTimeout=j,t.onAfterInteractive=E,t.onBeforeInteractive=g,t.onUnsupported=m},[T,y,O,x,h,j,E,g,m]),d.default.createElement("div",{ref:_,id:e,className:n,style:ee})}u.default=Y;function Z(e){return{execute:n=>window.turnstile.execute(e,n),reset:()=>window.turnstile.reset(e),getResponse:()=>window.turnstile.getResponse(e),isExpired:()=>window.turnstile.isExpired(e)}}function I(){const[e,n]=(0,d.useState)(s);return(0,d.useEffect)(()=>{s!=="ready"&&M.then(()=>n(s))},[]),f.turnstile}return u.useTurnstile=I,u}var ie=le();const ae=ne(ie);export{ae as T};
